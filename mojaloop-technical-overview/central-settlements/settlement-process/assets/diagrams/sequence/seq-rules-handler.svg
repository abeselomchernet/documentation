<svg xmlns="http://www.w3.org/2000/svg" height="2849" preserveAspectRatio="none" style="width:3091px;height:2849px" width="3091">
  <defs>
    <filter height="300%" id="a" width="300%" x="-1" y="-1">
      <feGaussianBlur result="blurOut" stdDeviation="2"/>
      <feColorMatrix in="blurOut" result="blurOut2" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/>
      <feOffset dx="4" dy="4" in="blurOut2" result="blurOut3"/>
      <feBlend in="SourceGraphic" in2="blurOut3"/>
    </filter>
  </defs>
  <text font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="299" x="1394" y="28.708">
    Rules Handler Consume (Success)
  </text>
  <path fill="#90EE90" stroke="#a80036" d="M26 40.953h2465.5v2802.609H26z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="139" x="1189.25" y="53.02">
    Settlement Service
  </text>
  <path fill="#FFFFE0" stroke="#a80036" d="M2526 40.953h125v2802.609h-125z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="119" x="2529" y="53.02">
    Central Services
  </text>
  <path fill="#FFF" filter="url(#a)" stroke="#a80036" d="M93 615.438h10v30H93zM373 132.383h10v2635.883h-10zM819 201.781h10v102.398h-10zM819 853.367h10v419.727h-10zM1881 906.633h10v288.195h-10zM2110 935.766h10v222.93h-10zM2411.5 1447.891h10v29.133h-10zM2583.5 964.898h10v29.133h-10zM2583.5 1850.352h10v30h-10zM2583.5 2215.008h10v30h-10zM2583.5 2368.672h10v30h-10zM2583.5 2506.336h10v30h-10z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M10 139.383h3067v2621.883H10z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M317 163.516h1579v399.656H317z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M762 216.781h1124v59.266H762zM20 577.172h3047v2177.094H20z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M317 660.438h378v74.398H317zM267 748.836h2790v1998.43H267z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M317 815.102h2343.5v465.992H317z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M762 868.367h1888.5v376.594H762zM277 1295.094h2770v1445.172H277z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M287 1361.359h2230.5v383.461H287z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M297 1385.492h2210.5v352.328H297z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M307 1409.625h2190.5v321.195H307z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M317 1534.156h333v145.531H317z"/>
  <path fill="#FFF" d="M317 1635.555h333v44.133H317zM307 1686.688h2190.5v44.133H307z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M317 1758.82h2720v930.313H317z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M2150 1812.086h877V2638h-877z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M2360 2260.008h456v80.531h-456z"/>
  <path fill="#FFF" d="M317 2645h2720v44.133H317zM277 2696.133h2770v44.133H277z"/>
  <path stroke="#a80036" stroke-dasharray="5,5" d="M98 122.383v2655.883M378 122.383v2655.883M824 122.383v2655.883M1885.5 122.383v2655.883M2115 122.383v2655.883M2276.5 122.383v2655.883M2416.5 122.383v2655.883M2588.5 122.383v2655.883"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M34 83.086h128v30.297H34z"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M30 87.086h128v30.297H30z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="37" y="107.081">
    topic-notification
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M34 2777.266h128v30.297H34z"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M30 2781.266h128v30.297H30z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="37" y="2801.261">
    topic-notification
  </text>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="327" y="119.081">
    Rules Handler
  </text>
  <circle cx="378" cy="90.086" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="12"/>
  <path fill="#A80036" stroke="#a80036" d="M374 78.086l6-5-2 5 2 5-6-5z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="327" y="2790.261">
    Rules Handler
  </text>
  <circle cx="378" cy="2809.563" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="12"/>
  <path fill="#A80036" stroke="#a80036" d="M374 2797.563l6-5-2 5 2 5-6-5z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="772" y="119.081">
    Scripts Loader
  </text>
  <circle cx="824" cy="90.086" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="12"/>
  <path stroke="#a80036" stroke-width="2" d="M812 104.086h24"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="772" y="2790.261">
    Scripts Loader
  </text>
  <circle cx="824" cy="2809.563" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="12"/>
  <path stroke="#a80036" stroke-width="2" d="M812 2823.563h24"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="1837.5" y="119.081">
    Script Engine
  </text>
  <circle cx="1886" cy="90.086" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="12"/>
  <path stroke="#a80036" stroke-width="2" d="M1874 104.086h24"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="1837.5" y="2790.261">
    Script Engine
  </text>
  <circle cx="1886" cy="2809.563" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="12"/>
  <path stroke="#a80036" stroke-width="2" d="M1874 2823.563h24"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="2054" y="119.081">
    Transaction DAO
  </text>
  <circle cx="2115" cy="90.086" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="12"/>
  <path stroke="#a80036" stroke-width="2" d="M2103 104.086h24"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="2054" y="2790.261">
    Transaction DAO
  </text>
  <circle cx="2115" cy="2809.563" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="12"/>
  <path stroke="#a80036" stroke-width="2" d="M2103 2823.563h24"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="2218.5" y="119.081">
    Settlement DAO
  </text>
  <circle cx="2277" cy="90.086" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="12"/>
  <path stroke="#a80036" stroke-width="2" d="M2265 104.086h24"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="2218.5" y="2790.261">
    Settlement DAO
  </text>
  <circle cx="2277" cy="2809.563" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="12"/>
  <path stroke="#a80036" stroke-width="2" d="M2265 2823.563h24"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="2345.5" y="119.081">
    Central Ledger DAO
  </text>
  <circle cx="2416.5" cy="90.086" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="12"/>
  <path stroke="#a80036" stroke-width="2" d="M2404.5 104.086h24"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="2345.5" y="2790.261">
    Central Ledger DAO
  </text>
  <circle cx="2416.5" cy="2809.563" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="12"/>
  <path stroke="#a80036" stroke-width="2" d="M2404.5 2823.563h24"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="2536.5" y="119.081">
    central_ledger
  </text>
  <path d="M2570.5 70.086c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10v-26" fill="#FEFECE" filter="url(#a)" stroke="#000" stroke-width="1.5"/>
  <path d="M2570.5 70.086c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#000" stroke-width="1.5"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="2536.5" y="2790.261">
    central_ledger
  </text>
  <path d="M2570.5 2803.563c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10v-26" fill="#FEFECE" filter="url(#a)" stroke="#000" stroke-width="1.5"/>
  <path d="M2570.5 2803.563c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#000" stroke-width="1.5"/>
  <path fill="#FFF" filter="url(#a)" stroke="#a80036" d="M93 615.438h10v30H93zM373 132.383h10v2635.883h-10zM819 201.781h10v102.398h-10zM819 853.367h10v419.727h-10zM1881 906.633h10v288.195h-10zM2110 935.766h10v222.93h-10zM2411.5 1447.891h10v29.133h-10zM2583.5 964.898h10v29.133h-10zM2583.5 1850.352h10v30h-10zM2583.5 2215.008h10v30h-10zM2583.5 2368.672h10v30h-10zM2583.5 2506.336h10v30h-10z"/>
  <path d="M10 139.383h297v7l-10 10H10v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M10 139.383h3067v2621.883H10z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="252" x="25" y="152.45">
    Rules Handler Consume (Success)
  </text>
  <path d="M317 163.516h137v7l-10 10H317v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M317 163.516h1579v399.656H317z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="92" x="332" y="176.583">
    Load Scripts
  </text>
  <path fill="#A80036" stroke="#a80036" d="M807 197.781l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M383 201.781h430"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="390" y="196.715">
    1
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="247" x="403" y="196.715">
    load scripts (yaml file) (scriptDirectory)
  </text>
  <path d="M762 216.781h77v7l-10 10h-67v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M762 216.781h1124v59.266H762z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="777" y="229.848">
    loop
  </text>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="854" y="228.992">
    [script]
  </text>
  <path stroke="#a80036" d="M829 255.047h42M871 255.047v13M830 268.047h41"/>
  <path fill="#A80036" stroke="#a80036" d="M840 264.047l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="836" y="249.981">
    2
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="1025" x="849" y="249.981">
    validate script type, action and status against enums; validate script is valid JS; validate start and end timestamps; Create a map ScriptMap[type][action][result]
  </text>
  <path fill="#A80036" stroke="#a80036" d="M394 300.18l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M388 304.18h435"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="400" y="299.114">
    3
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="413" y="299.114">
    create script map
  </text>
  <path d="M388 317.18v236h359v-226l-10-10H388" fill="#FF0" filter="url(#a)" stroke="#a80036"/>
  <path d="M737 317.18v10h10l-10-10" fill="#FF0" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="394" y="334.247">
    example:
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="394" y="349.379">
    {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="410" y="364.512">
    scriptType: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="426" y="379.645">
    scriptAction: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="442" y="394.778">
    scriptStatus: {[
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="458" y="409.911">
    {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="228" x="474" y="425.043">
    name: &quot;interchangeFeeCalculation&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="258" x="474" y="440.176">
    startTime: &quot;2020-06-01T00:00:00.000Z&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="252" x="474" y="455.309">
    endTime: &quot;2100-12-31T23:59:59.999Z&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="474" y="470.442">
    script: [vm.Script]
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="458" y="485.575">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="13" x="442" y="500.707">
    ]}
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="426" y="515.84">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="410" y="530.973">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="394" y="546.106">
    }
  </text>
  <path d="M20 577.172h224v7l-10 10H20v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M20 577.172h3047v2177.094H20z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="179" x="35" y="590.239">
    Process Single Message
  </text>
  <path fill="#A80036" stroke="#a80036" d="M114 611.438l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M108 615.438h264"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="120" y="610.372">
    4
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="238" x="133" y="610.372">
    Consume notification event message
  </text>
  <path d="M317 660.438h177v7l-10 10H317v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M317 660.438h378v74.398H317z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="132" x="332" y="673.504">
    Validate Message
  </text>
  <path stroke="#a80036" d="M383 713.836h42M425 713.836v13M384 726.836h41"/>
  <path fill="#A80036" stroke="#a80036" d="M394 722.836l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="390" y="701.204">
    5
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="280" x="403" y="693.637">
    Validate event - Rule: message has payload
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="403" y="708.77">
    Error codes:
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="497" y="708.77">
    2001
  </text>
  <path d="M267 748.836h64v7l-10 10h-54v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M267 748.836h2790v1998.43H267z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="282" y="761.903">
    alt
  </text>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="79" x="346" y="761.046">
    [Rule found]
  </text>
  <path stroke="#a80036" d="M383 787.102h42M425 787.102v13M384 800.102h41"/>
  <path fill="#A80036" stroke="#a80036" d="M394 796.102l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="390" y="782.036">
    6
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="409" x="403" y="782.036">
    check if ScriptMap[type][action][result] has valid script assigned
  </text>
  <path d="M317 815.102h159v7l-10 10H317v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M317 815.102h2343.5v465.992H317z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="114" x="332" y="828.168">
    Execute Scripts
  </text>
  <path fill="#A80036" stroke="#a80036" d="M807 849.367l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M383 853.367h430"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="390" y="848.301">
    7
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="403" y="848.301">
    execute scripts
  </text>
  <path d="M762 868.367h77v7l-10 10h-67v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M762 868.367h1888.5v376.594H762z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="777" y="881.434">
    loop
  </text>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="854" y="880.578">
    [script]
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1869 902.633l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M829 906.633h1046"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="836" y="901.567">
    8
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="217" x="849" y="901.567">
    execute(script, message payload)
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2098 931.766l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M1891 935.766h213"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1898" y="930.7">
    9
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="1911" y="930.7">
    Get transaction by transfer Id
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2571.5 960.898l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M2120 964.898h457.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="2127" y="959.832">
    10
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="213" x="2149" y="959.832">
    retrieve ILP packet from ilpPacket
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2131 990.031l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M2125 994.031h462.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="2137" y="988.965">
    11
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="2159" y="988.965">
    ilpPacket row
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1902 1019.164l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M1896 1023.164h213"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1908" y="1018.098">
    12
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="1930" y="1018.098">
    ilpPacket row
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2098 1048.297l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M1891 1052.297h213"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1898" y="1047.231">
    13
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="1920" y="1047.231">
    Get transaction object
  </text>
  <path stroke="#a80036" d="M2120 1081.43h42M2162 1081.43v13M2121 1094.43h41"/>
  <path fill="#A80036" stroke="#a80036" d="M2131 1090.43l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="2127" y="1076.364">
    14
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="2149" y="1076.364">
    decode ILP packet
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1902 1119.563l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M1896 1123.563h213"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1908" y="1118.497">
    15
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="1930" y="1118.497">
    Transaction object
  </text>
  <path stroke="#a80036" d="M1891 1157.695h42M1933 1157.695v13M1886 1170.695h47"/>
  <path fill="#A80036" stroke="#a80036" d="M1896 1166.695l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1898" y="1152.629">
    16
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="1920" y="1152.629">
    execute script in sandbox
  </text>
  <path fill="#A80036" stroke="#a80036" d="M840 1190.828l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M834 1194.828h1051"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="846" y="1189.762">
    17
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="868" y="1189.762">
    Ledger entries
  </text>
  <path stroke="#a80036" d="M829 1223.961h42M871 1223.961v13M830 1236.961h41"/>
  <path fill="#A80036" stroke="#a80036" d="M840 1232.96l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="836" y="1218.895">
    18
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="858" y="1218.895">
    Merge results
  </text>
  <path fill="#A80036" stroke="#a80036" d="M394 1269.094l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M388 1273.094h435"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="400" y="1268.028">
    19
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82" x="422" y="1268.028">
    script results
  </text>
  <path d="M277 1295.094h433v7l-10 10H277v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M277 1295.094h2770v1445.172H277z"/>
  <text fill="#00F" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="388" x="292" y="1308.161">
    DB TRANSACTION: Validate and Insert ledger entries
  </text>
  <path stroke="#a80036" d="M383 1333.359h42M425 1333.359v13M384 1346.359h41"/>
  <path fill="#A80036" stroke="#a80036" d="M394 1342.36l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="390" y="1328.293">
    20
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="412" y="1328.293">
    Create validBatch = [];
  </text>
  <path d="M287 1361.36h77v7l-10 10h-67v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M287 1361.359h2230.5v383.461H287z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="302" y="1374.426">
    loop
  </text>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="84" x="379" y="1373.57">
    [ledgerEntry]
  </text>
  <path d="M297 1385.492h219v7l-10 10H297v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M297 1385.492h2210.5v352.328H297z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="174" x="312" y="1398.559">
    Validate Ledger entries
  </text>
  <path d="M307 1409.625h64v7l-10 10h-54v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M307 1409.625h2190.5v321.195H307z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="322" y="1422.692">
    alt
  </text>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="386" x="386" y="1421.835">
    [participant is payer and settlement model is checking NDC]
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2399.5 1443.89l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M383 1447.891h2022.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="390" y="1442.825">
    21
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="202" x="412" y="1442.825">
    participants positions and limits
  </text>
  <path fill="#A80036" stroke="#a80036" d="M394 1473.023l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M388 1477.023h2027.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="400" y="1471.957">
    22
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="202" x="422" y="1471.957">
    participants positions and limits
  </text>
  <path stroke="#a80036" d="M383 1506.156h42M425 1506.156v13M384 1519.156h41"/>
  <path fill="#A80036" stroke="#a80036" d="M394 1515.156l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="390" y="1501.09">
    23
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="388" x="412" y="1501.09">
    Calculate position after ledger entry with ledgerEntry.amount
  </text>
  <path d="M317 1534.156h64v7l-10 10h-54v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M317 1534.156h333v145.531H317z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="332" y="1547.223">
    alt
  </text>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="249" x="396" y="1546.367">
    [Calculated position is breaching NDC]
  </text>
  <path stroke="#a80036" d="M383 1572.422h42M425 1572.422v13M384 1585.422h41"/>
  <path fill="#A80036" stroke="#a80036" d="M394 1581.422l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="390" y="1567.356">
    24
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="412" y="1567.356">
    validBatch = [];
  </text>
  <path stroke="#a80036" d="M383 1614.555h42M425 1614.555v13M384 1627.555h41"/>
  <path fill="#A80036" stroke="#a80036" d="M394 1623.555l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="390" y="1609.489">
    25
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="412" y="1609.489">
    break Loop ledgerEntry
  </text>
  <path stroke="#000" stroke-dasharray="2,2" d="M317 1636.555h333"/>
  <path stroke="#a80036" d="M383 1658.688h42M425 1658.688v13M384 1671.688h41"/>
  <path fill="#A80036" stroke="#a80036" d="M394 1667.688l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="390" y="1653.622">
    26
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="412" y="1653.622">
    Insert LedgerEntry into Valid batch;
  </text>
  <path stroke="#000" stroke-dasharray="2,2" d="M307 1687.688h2190.5"/>
  <path stroke="#a80036" d="M383 1709.82h42M425 1709.82v13M384 1722.82h41"/>
  <path fill="#A80036" stroke="#a80036" d="M394 1718.82l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="390" y="1704.754">
    27
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="412" y="1704.754">
    Insert LedgerEntry into Valid batch;
  </text>
  <path d="M317 1758.82h64v7l-10 10h-54v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M317 1758.82h2720v930.313H317z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="332" y="1771.887">
    alt
  </text>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="154" x="396" y="1771.031">
    [validBatch has entries]
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2265 1793.086l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M383 1797.086h1888"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="390" y="1792.02">
    28
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="412" y="1792.02">
    Insert valid ledger entries
  </text>
  <path d="M2150 1812.086h77v7l-10 10h-67v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M2150 1812.086h877V2638h-877z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="2165" y="1825.153">
    loop
  </text>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="78" x="2242" y="1824.296">
    [validBatch]
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2571.5 1846.352l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M2277 1850.352h300.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="2284" y="1845.286">
    29
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="210" x="2306" y="1845.286">
    Insert transferParticipant records
  </text>
  <path fill="#FFFFE0" filter="url(#a)" stroke="#a80036" d="M2170 1893.352h837l10 147-10 148h-837l-10-148 10-147z"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="64" x="2172" y="1909.418">
    insert into
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="140" x="2240" y="1909.418">
    transferParticipant
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="210" x="2172" y="1924.551">
    select {transferId} AS transferId,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="2196" y="1939.684">
    `PC`.`participantCurrencyId`,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="281" x="2196" y="1954.817">
    IFNULL(`T1`.`transferparticipantroletypeId`,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="460" x="2228" y="1969.95">
    `T2`.`transferparticipantroletypeId`) as `transferParticipantRoleTypeId`,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="2196" y="1985.082">
    `E`.`ledgerEntryTypeId`,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="2196" y="2000.215">
    CASE `P`.`name`
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="391" x="2212" y="2015.348">
    WHEN {ledgerEntry.payerFspId} THEN {ledgerEntry.amount}
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="422" x="2212" y="2030.481">
    WHEN {ledgerEntry.payeeFspId} THEN {ledgerEntry.amount * -1}
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="2212" y="2045.614">
    ELSE 0
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="2196" y="2060.747">
    END AS `amount`
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="227" x="2172" y="2075.879">
    from `participantCurrency` as `PC`
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="479" x="2172" y="2091.012">
    inner join `participant` as `P` on `P`.`participantId` = `PC`.`participantId`
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="630" x="2172" y="2106.145">
    inner join `ledgerEntryType` as `E` on `E`.`LedgerAccountTypeId` = `PC`.`LedgerAccountTypeId`
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="833" x="2172" y="2121.278">
    left outer join `transferParticipantRoleType` as `T1` on `P`.`name` = {ledgerEntry.payerFspId} and `T1`.`name` = &apos;PAYER_DFSP&apos;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="833" x="2172" y="2136.411">
    left outer join `transferParticipantRoleType` as `T2` on `P`.`name` = {ledgerEntry.payerFspId} and `T2`.`name` = &apos;PAYEE_DFSP&apos;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="345" x="2172" y="2151.544">
    where `E`.`name` = {ledgerEntry.ledgerEntryTypeId}
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="469" x="2180" y="2166.676">
    and `P`.`name` in ({ledgerEntry.payerFspId}, {ledgerEntry.payeeFspId})
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="314" x="2180" y="2181.809">
    and `PC`.`currencyId` = {ledgerEntry.currency};
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2571.5 2211.008l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M2277 2215.008h300.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="2284" y="2209.942">
    30
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="2306" y="2209.942">
    Update positions
  </text>
  <path d="M2360 2260.008h77v7l-10 10h-67v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M2360 2260.008h456v80.531h-456z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="2375" y="2273.075">
    loop
  </text>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="183" x="2452" y="2272.218">
    [transferParticipant records]
  </text>
  <path fill="#FFFFE0" filter="url(#a)" stroke="#a80036" d="M2380 2282.14h416l10 26-10 27h-416l-10-27 10-26z"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="2382" y="2298.207">
    update
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="154" x="2431" y="2298.207">
    `participantPosition`
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="269" x="2382" y="2313.34">
    set `value` = `value` + {record.amount}
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="412" x="2382" y="2328.473">
    where `participantCurrencyId` = {record.participantCurrencyId};
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2571.5 2364.672l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M2277 2368.672h300.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="2284" y="2363.606">
    31
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="206" x="2306" y="2363.606">
    Get transferStateChange record
  </text>
  <path fill="#FFFFE0" filter="url(#a)" stroke="#a80036" d="M2461 2411.672h255l10 34-10 34h-255l-10-34 10-34z"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="2463" y="2427.739">
    select `transferStateChangeId`
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="2463" y="2442.872">
    from
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="168" x="2497" y="2442.872">
    `transferStateChange`
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="213" x="2463" y="2458.004">
    where `transferId` = {transferId}
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="243" x="2471" y="2473.137">
    and `transferStateId` = &apos;COMMITTED&apos;;
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2571.5 2502.336l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M2277 2506.336h300.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="2284" y="2501.27">
    32
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="259" x="2306" y="2501.27">
    Insert participantPositionChange records
  </text>
  <path fill="#FFFFE0" filter="url(#a)" stroke="#a80036" d="M2318 2549.336h541l10 41-10 42h-541l-10-42 10-41z"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="64" x="2320" y="2565.403">
    insert into
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="210" x="2388" y="2565.403">
    `participantPositionChange`
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="524" x="2320" y="2580.536">
    select `participantPositionId`, {transferStateChangeId}, `value`, `reservedValue`
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="166" x="2320" y="2595.669">
    from `participantPosition`
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="537" x="2320" y="2610.801">
    where `participantCurrencyId` = {transferParticipantRecord1.participantCurrencyId}
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="516" x="2328" y="2625.934">
    or `participantCurrencyId` = {transferParticipantRecord2.participantCurrencyId};
  </text>
  <path stroke="#000" stroke-dasharray="2,2" d="M317 2646h2720"/>
  <path stroke="#a80036" d="M383 2668.133h42M425 2668.133v13M384 2681.133h41"/>
  <path fill="#A80036" stroke="#a80036" d="M394 2677.133l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="390" y="2663.067">
    33
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="23" x="412" y="2663.067">
    exit
  </text>
  <path stroke="#000" stroke-dasharray="2,2" d="M277 2697.133h2770"/>
  <path stroke="#a80036" d="M383 2719.266h42M425 2719.266v13M384 2732.266h41"/>
  <path fill="#A80036" stroke="#a80036" d="M394 2728.266l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="390" y="2714.2">
    34
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="23" x="412" y="2714.2">
    exit
  </text>
</svg>
